<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ - ã¤ã¶ãƒŠãƒ“</title>
    <style>
        body { font-family: 'Zen Maru Gothic', sans-serif; padding: 20px; background: #FFF8E1; }
        .container { max-width: 800px; margin: 0 auto; }
        .test-section { background: white; padding: 20px; margin: 20px 0; border-radius: 15px; box-shadow: 0 4px 12px rgba(255, 152, 0, 0.1); }
        .test-title { color: #FF9800; font-size: 18px; font-weight: bold; margin-bottom: 15px; }
        .test-input { width: 100%; padding: 10px; border: 2px solid #FFE0B2; border-radius: 10px; margin-bottom: 10px; }
        .test-button { background: linear-gradient(135deg, #FFB74D 0%, #FF9800 100%); color: white; border: none; padding: 10px 20px; border-radius: 10px; cursor: pointer; font-weight: bold; }
        .test-result { background: #FFFBF5; padding: 15px; border-radius: 10px; margin-top: 10px; border: 2px solid #FFE0B2; white-space: pre-wrap; }
        .status { padding: 5px 10px; border-radius: 5px; font-size: 12px; font-weight: bold; margin-bottom: 10px; }
        .status.success { background: #E8F5E9; color: #2E7D32; }
        .status.fallback { background: #FFF3E0; color: #F57C00; }
        .status.error { background: #FFEBEE; color: #C62828; }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="color: #FF9800; text-align: center;">ğŸ¤– AIæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h1>
        
        <div class="test-section">
            <div class="test-title">1. ã¤ã¶ã‚„ãåˆ†æãƒ†ã‚¹ãƒˆ</div>
            <input type="text" class="test-input" id="tweetInput" placeholder="ä¾‹: ä»Šæ—¥ã¯APIè¨­è¨ˆæ›¸ã‚’ä½œæˆã™ã‚‹äºˆå®šã§ã™ã€‚æ¥½ã—ã¿ï¼" value="ä»Šæ—¥ã¯APIè¨­è¨ˆæ›¸ã‚’ä½œæˆã™ã‚‹äºˆå®šã§ã™ã€‚æ¥½ã—ã¿ï¼">
            <button class="test-button" onclick="testTweetAnalysis()">åˆ†æå®Ÿè¡Œ</button>
            <div id="tweetResult"></div>
        </div>
        
        <div class="test-section">
            <div class="test-title">2. æ—¥å ±ç”Ÿæˆãƒ†ã‚¹ãƒˆ</div>
            <textarea class="test-input" id="reportInput" rows="4" placeholder="ã¤ã¶ã‚„ãå±¥æ­´ã‚’å…¥åŠ›...">ãƒãƒ¼ãƒ ä¼šè­°ã§æ–°æ©Ÿèƒ½ã«ã¤ã„ã¦è©±ã—åˆã£ãŸ
APIè¨­è¨ˆæ›¸ã‚’ä½œæˆã—ãŸ
ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å®Ÿæ–½ã—ãŸ
æ˜æ—¥ã®ã‚¿ã‚¹ã‚¯ã‚’æ•´ç†ã—ãŸ</textarea>
            <button class="test-button" onclick="testReportGeneration()">æ—¥å ±ç”Ÿæˆ</button>
            <div id="reportResult"></div>
        </div>
        
        <div class="test-section">
            <div class="test-title">3. è‹¦æ‚©åˆ†æãƒ†ã‚¹ãƒˆ</div>
            <input type="text" class="test-input" id="struggleInput" placeholder="ä¾‹: æœ€è¿‘æˆé•·ã—ã¦ã„ã‚‹å®Ÿæ„ŸãŒãªãã¦ä¸å®‰ã§ã™" value="æœ€è¿‘æˆé•·ã—ã¦ã„ã‚‹å®Ÿæ„ŸãŒãªãã¦ä¸å®‰ã§ã™">
            <button class="test-button" onclick="testStruggleAnalysis()">è‹¦æ‚©åˆ†æ</button>
            <div id="struggleResult"></div>
        </div>
        
        <div class="test-section">
            <div class="test-title">4. ã‚ã—ã‚ã¨ç”Ÿæˆãƒ†ã‚¹ãƒˆ</div>
            <button class="test-button" onclick="testFootprintGeneration()">ã‚ã—ã‚ã¨ç”Ÿæˆ</button>
            <div id="footprintResult"></div>
        </div>
        
        <div style="text-align: center; margin-top: 30px;">
            <a href="home_tsubunavi.html" style="background: linear-gradient(135deg, #FFB74D 0%, #FF9800 100%); color: white; padding: 15px 30px; border-radius: 25px; text-decoration: none; font-weight: bold;">ğŸ  ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã«æˆ»ã‚‹</a>
        </div>
    </div>

    <script>
        // ã¤ã¶ã‚„ãåˆ†æãƒ†ã‚¹ãƒˆ
        async function testTweetAnalysis() {
            const input = document.getElementById('tweetInput').value;
            const resultDiv = document.getElementById('tweetResult');
            
            resultDiv.innerHTML = '<div class="status">ğŸ”„ AIåˆ†æä¸­...</div>';
            
            try {
                const result = await analyzeTweetDirect(input);
                const statusClass = result.source === 'ai' ? 'success' : 'fallback';
                const statusText = result.source === 'ai' ? 'âœ… AIåˆ†ææˆåŠŸ' : 'âš ï¸ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†';
                
                resultDiv.innerHTML = `
                    <div class="status ${statusClass}">${statusText}</div>
                    <div class="test-result">${JSON.stringify(result.data, null, 2)}</div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="status error">âŒ ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ</div>
                    <div class="test-result">ã‚¨ãƒ©ãƒ¼: ${error.message}</div>
                `;
            }
        }
        
        // æ—¥å ±ç”Ÿæˆãƒ†ã‚¹ãƒˆ
        async function testReportGeneration() {
            const input = document.getElementById('reportInput').value;
            const resultDiv = document.getElementById('reportResult');
            
            resultDiv.innerHTML = '<div class="status">ğŸ”„ æ—¥å ±ç”Ÿæˆä¸­...</div>';
            
            try {
                const result = await generateReportDirect(input);
                const statusClass = result.source === 'ai' ? 'success' : 'fallback';
                const statusText = result.source === 'ai' ? 'âœ… AIç”ŸæˆæˆåŠŸ' : 'âš ï¸ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†';
                
                resultDiv.innerHTML = `
                    <div class="status ${statusClass}">${statusText}</div>
                    <div class="test-result">${result.data}</div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="status error">âŒ ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ</div>
                    <div class="test-result">ã‚¨ãƒ©ãƒ¼: ${error.message}</div>
                `;
            }
        }
        
        // è‹¦æ‚©åˆ†æãƒ†ã‚¹ãƒˆ
        async function testStruggleAnalysis() {
            const input = document.getElementById('struggleInput').value;
            const resultDiv = document.getElementById('struggleResult');
            
            resultDiv.innerHTML = '<div class="status">ğŸ”„ è‹¦æ‚©åˆ†æä¸­...</div>';
            
            try {
                const result = await analyzeStruggleDirect(input);
                const statusClass = result.source === 'ai' ? 'success' : 'fallback';
                const statusText = result.source === 'ai' ? 'âœ… AIåˆ†ææˆåŠŸ' : 'âš ï¸ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†';
                
                resultDiv.innerHTML = `
                    <div class="status ${statusClass}">${statusText}</div>
                    <div class="test-result">${JSON.stringify(result.data, null, 2)}</div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="status error">âŒ ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ</div>
                    <div class="test-result">ã‚¨ãƒ©ãƒ¼: ${error.message}</div>
                `;
            }
        }
        
        // ã‚ã—ã‚ã¨ç”Ÿæˆãƒ†ã‚¹ãƒˆ
        async function testFootprintGeneration() {
            const resultDiv = document.getElementById('footprintResult');
            
            resultDiv.innerHTML = '<div class="status">ğŸ”„ ã‚ã—ã‚ã¨ç”Ÿæˆä¸­...</div>';
            
            try {
                const result = await generateFootprintDirect();
                const statusClass = result.source === 'ai' ? 'success' : 'fallback';
                const statusText = result.source === 'ai' ? 'âœ… AIç”ŸæˆæˆåŠŸ' : 'âš ï¸ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†';
                
                resultDiv.innerHTML = `
                    <div class="status ${statusClass}">${statusText}</div>
                    <div class="test-result">${JSON.stringify(result.data, null, 2)}</div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="status error">âŒ ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ</div>
                    <div class="test-result">ã‚¨ãƒ©ãƒ¼: ${error.message}</div>
                `;
            }
        }
        
        // AIå‘¼ã³å‡ºã—é–¢æ•°ç¾¤
        async function analyzeTweetDirect(text) {
            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†
            const isTask = /ä½œã‚‹|ä½œæˆ|å¯¾å¿œ|æº–å‚™|å®Ÿæ–½|ã‚„ã‚‹|ã™ã‚‹|ã—ãªã„ã¨|ã¾ã§/.test(text);
            const isPositive = /å¬‰ã—ã„|æ¥½ã—ã„|è‰¯ã„|æˆåŠŸ|ã§ããŸ|é ‘å¼µ|ã‚ã‚ŠãŒã¨/.test(text);
            const isNegative = /é›£ã—ã„|å›°|å¤§å¤‰|ç–²|è¾›|ã§ããªã„|ã‚ã‹ã‚‰ãªã„/.test(text);
            
            return {
                source: 'fallback',
                data: {
                    isTask,
                    isPositive,
                    isNegative,
                    extractedTask: isTask ? text.substring(0, 20) + '...' : null,
                    skill: isTask ? 'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°' : null
                }
            };
        }
        
        async function generateReportDirect(tweets) {
            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†
            const lines = tweets.split('\n').filter(line => line.trim());
            const report = `ã€æœ¬æ—¥ã®æ´»å‹•å ±å‘Šã€‘\n\n` +
                lines.map((line, i) => `${i + 1}. ${line}`).join('\n') +
                `\n\nã€æ‰€æ„Ÿã€‘\næœ¬æ—¥ã¯${lines.length}ä»¶ã®æ´»å‹•ã‚’è¡Œã„ã¾ã—ãŸã€‚`;
            
            return { source: 'fallback', data: report };
        }
        
        async function analyzeStruggleDirect(text) {
            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†
            const categories = {
                'æŠ€è¡“': /æŠ€è¡“|ãƒ—ãƒ­ã‚°ãƒ©ãƒ |ã‚³ãƒ¼ãƒ‰|ãƒã‚°|ã‚¨ãƒ©ãƒ¼|é–‹ç™º/,
                'ã‚­ãƒ£ãƒªã‚¢': /æˆé•·|ã‚­ãƒ£ãƒªã‚¢|å°†æ¥|è»¢è·|æ˜‡é€²|è©•ä¾¡/,
                'äººé–“é–¢ä¿‚': /äººé–“é–¢ä¿‚|ãƒãƒ¼ãƒ |ä¸Šå¸|åŒåƒš|ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³/,
                'ãã®ä»–': /.*/
            };
            
            let category = 'ãã®ä»–';
            for (const [cat, regex] of Object.entries(categories)) {
                if (regex.test(text)) {
                    category = cat;
                    break;
                }
            }
            
            const severity = text.length > 30 ? 'é«˜' : text.length > 15 ? 'ä¸­' : 'ä½';
            const suggestions = {
                'æŠ€è¡“': 'æŠ€è¡“æ›¸ã‚’èª­ã‚“ã ã‚Šã€å®Ÿéš›ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ç·´ç¿’ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚',
                'ã‚­ãƒ£ãƒªã‚¢': 'ç›®æ¨™ã‚’æ˜ç¢ºã«ã—ã¦ã€å°ã•ãªã‚¹ãƒ†ãƒƒãƒ—ã‹ã‚‰å§‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚',
                'äººé–“é–¢ä¿‚': 'ç›¸æ‰‹ã®ç«‹å ´ã‚’ç†è§£ã—ã€ç©æ¥µçš„ã«ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å–ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚',
                'ãã®ä»–': 'ä¸€äººã§æŠ±ãˆè¾¼ã¾ãšã€ä¿¡é ¼ã§ãã‚‹äººã«ç›¸è«‡ã—ã¦ã¿ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚'
            };
            
            return {
                source: 'fallback',
                data: {
                    category,
                    severity,
                    suggestion: suggestions[category]
                }
            };
        }
        
        async function generateFootprintDirect() {
            // ã‚ã—ã‚ã¨ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿
            const dummyFootprints = {
                currentStatus: {
                    activeSkills: [
                        { skill: "JavaScript", level: 75, recentActivity: "ãƒªã‚¢ã‚¯ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ" },
                        { skill: "APIè¨­è¨ˆ", level: 60, recentActivity: "REST APIä»•æ§˜æ›¸ä½œæˆ" },
                        { skill: "ãƒãƒ¼ãƒ é€£æº", level: 80, recentActivity: "ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Ÿæ–½" }
                    ],
                    todaysTasks: [
                        { task: "APIè¨­è¨ˆæ›¸ä½œæˆ", skill: "APIè¨­è¨ˆ", completed: false, priority: "high" },
                        { task: "ãƒãƒ¼ãƒ ä¼šè­°å‚åŠ ", skill: "ãƒãƒ¼ãƒ é€£æº", completed: true, priority: "medium" }
                    ],
                    emotionalState: {
                        positive: 70,
                        negative: 20,
                        neutral: 10,
                        dominantEmotion: "å‰å‘ã"
                    }
                },
                recentFootprints: [
                    {
                        date: "2024-01-15",
                        skillGrowth: [
                            { skill: "React", growth: "+5", reason: "æ–°ã—ã„Hookã‚’å­¦ç¿’" },
                            { skill: "ãƒ‡ãƒãƒƒã‚°", growth: "+3", reason: "ãƒã‚°ä¿®æ­£ã§çµŒé¨“ç©" }
                        ],
                        completedTasks: 3,
                        mood: "å……å®Ÿ"
                    },
                    {
                        date: "2024-01-14",
                        skillGrowth: [
                            { skill: "SQL", growth: "+4", reason: "è¤‡é›‘ãªã‚¯ã‚¨ãƒªä½œæˆ" },
                            { skill: "ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ", growth: "+2", reason: "ä»•æ§˜æ›¸æ›´æ–°" }
                        ],
                        completedTasks: 2,
                        mood: "é›†ä¸­"
                    }
                ],
                insights: {
                    growingSkills: ["JavaScript", "APIè¨­è¨ˆ"],
                    stagnantSkills: ["ãƒ†ã‚¹ãƒˆè¨­è¨ˆ"],
                    recommendedFocus: "ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æŠ€è¡“ã®æ·±åŒ–",
                    nextMilestone: "ã‚·ãƒ‹ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¸ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚¢ãƒƒãƒ—"
                }
            };
            
            return { source: 'fallback', data: dummyFootprints };
        }
    </script>
</body>
</html>